<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title> VENKATA SIVA SAI PRATHYUSH KOLLI | Portfolio</title>
  <meta name="description" content="Prathyush KVSS – Robotics Engineer portfolio and photo gallery." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: { extend: { fontFamily: { sans: ['Inter', 'ui-sans-serif', 'system-ui'] }, colors: { brand: { 50:'#f0f9ff',100:'#e0f2fe',200:'#bae6fd',300:'#7dd3fc',400:'#38bdf8',500:'#0ea5e9',600:'#0284c7',700:'#0369a1',800:'#075985',900:'#0c4a6e' }}, boxShadow:{soft:'0 10px 30px rgba(2,132,199,.12)'} } }
    }
  </script>
  <style> html{scroll-behavior:smooth} </style>
</head>
<body class="bg-white text-slate-800 dark:bg-slate-900 dark:text-slate-100 font-sans">
  <!-- Site Header -->
  <header class="sticky top-0 z-40 backdrop-blur bg-white/70 dark:bg-slate-900/70 border-b border-slate-200/60 dark:border-slate-800">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="#/" class="text-lg font-extrabold tracking-tight">PRATHYUSH</a>
      <nav class="hidden md:flex gap-6 text-sm font-medium">
        <a class="hover:text-brand-600" href="#/">Home</a>
        <a class="hover:text-brand-600" href="#/portfolio">Portfolio</a>
        <a class="hover:text-brand-600" href="#/photos">Photography</a>
      </nav>
      <div class="flex items-center gap-3">
        <a id="resumeLink" href="Prathyush_KVSS_Resume.pdf" class="hidden sm:inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-brand-600 hover:bg-brand-700 text-white text-sm shadow-soft" aria-label="Download Resume">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Resume
        </a>
        <button id="themeToggle" class="p-2 rounded-xl border border-slate-200 dark:border-slate-700" aria-label="Toggle theme">
          <svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"/></svg>
          <svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
        </button>
      </div>
    </div>
  </header>

  <!-- ROUTES -->
  <main class="min-h-[70vh]">
    <!-- Page 1: HOME -->
    <section data-route="/" class="hidden py-16">
      <div class="max-w-5xl mx-auto px-4 grid md:grid-cols-3 gap-10 items-start">
        <div class="md:col-span-2">
          <h1 class="text-4xl md:text-5xl font-extrabold leading-tight">Hi, I'm <span class="text-brand-600">Prathyush KVSS</span></h1>
          <p class="mt-4 text-lg text-slate-600 dark:text-slate-300">Robotics engineer who loves building things end‑to‑end — from PCB and controls to computer vision and ROS. I care about reliable systems, clear documentation, and shipping useful robots.</p>
          <div class="mt-6 space-y-2 text-slate-700 dark:text-slate-300">
            <p><strong>Email:</strong> <a class="underline" href="mailto:venkatasivasaip9@gmail.com">venkatasivasaip9@gmail.com</a></p>
            <p><strong>GitHub:</strong> <a class="underline" href="https://github.com/Prathyush-9" target="_blank" rel="noreferrer">Prathyush-9</a></p>
            <p><strong>LinkedIn:</strong> <a class="underline" href="https://www.linkedin.com/in/prathyush-kvss-9b5131174/" target="_blank" rel="noreferrer">prathyush-kvss</a></p>
          </div>
          <div class="mt-8 flex gap-3">
            <a href="#/portfolio" class="px-4 py-2 rounded-xl bg-slate-900 text-white dark:bg-white dark:text-slate-900 font-semibold">View Portfolio</a>
            <a href="#/photos" class="px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-700">See Photos</a>
          </div>
        </div>
        <div>
          <div class="aspect-square rounded-3xl bg-gradient-to-br from-brand-100 via-white to-brand-200 dark:from-slate-800 dark:via-slate-900 dark:to-slate-800 border border-slate-200 dark:border-slate-700 p-4">
            <div class="w-full h-full rounded-2xl border border-dashed border-slate-300 dark:border-slate-700 flex items-center justify-center text-center p-6">
              <p class="text-slate-500 dark:text-slate-400">Add your headshot here</p>
            </div>
          </div>
          <div class="mt-4 p-4 rounded-2xl bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700">
            <p class="text-xs uppercase tracking-wider text-slate-500">Open to</p>
            <p class="font-semibold">Robotics • CV • Controls (US)</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Page 2: PORTFOLIO (your original index sections) -->
    <section data-route="/portfolio" class="hidden">
      <!-- About -->
      <section class="py-16 border-b border-slate-200 dark:border-slate-800">
        <div class="max-w-4xl mx-auto px-4">
          <h2 class="text-2xl md:text-3xl font-extrabold">About</h2>
          <p class="mt-4 text-slate-600 dark:text-slate-300 leading-relaxed">I enjoy building end‑to‑end robotic systems. My experience spans PCB design and embedded bring‑up, perception with OpenCV/ROS, and factory‑floor automation with PLCs. Recent work includes a Schmitt‑trigger PCB for signal conditioning, PID tuning for AGV guidance, and a suction‑based 3‑DOF manipulator with ROS/Gazebo.</p>
        </div>
      </section>

      <!-- Skills -->
      <section class="py-16">
        <div class="max-w-6xl mx-auto px-4">
          <h2 class="text-2xl md:text-3xl font-extrabold">Skills</h2>
          <div class="mt-6 flex flex-wrap gap-2 text-sm">
            <span class="px-3 py-1 rounded-full bg-brand-50 text-brand-700 border border-brand-200">OpenCV</span>
            <span class="px-3 py-1 rounded-full bg-brand-50 text-brand-700 border border-brand-200">ROS / Gazebo</span>
            <span class="px-3 py-1 rounded-full bg-brand-50 text-brand-700 border border-brand-200">Python, C++</span>
            <span class="px-3 py-1 rounded-full bg-brand-50 text-brand-700 border border-brand-200">PLC (Siemens, AB, Mitsubishi)</span>
            <span class="px-3 py-1 rounded-full bg-brand-50 text-brand-700 border border-brand-200">PID Tuning</span>
            <span class="px-3 py-1 rounded-full bg-brand-50 text-brand-700 border border-brand-200">PCB Design</span>
            <span class="px-3 py-1 rounded-full bg-brand-50 text-brand-700 border border-brand-200">SolidWorks & FEA</span>
            <span class="px-3 py-1 rounded-full bg-brand-50 text-brand-700 border border-brand-200">Linux</span>
            <span class="px-3 py-1 rounded-full bg-brand-50 text-brand-700 border border-brand-200">Git</span>
            <span class="px-3 py-1 rounded-full bg-brand-50 text-brand-700 border border-brand-200">TensorFlow/PyTorch (basics)</span>
          </div>
        </div>
      </section>

      <!-- Projects -->
      <section class="py-16 border-t border-slate-200 dark:border-slate-800">
        <div class="max-w-6xl mx-auto px-4">
          <div class="flex items-end justify-between">
            <h2 class="text-2xl md:text-3xl font-extrabold">Projects</h2>
          </div>
          <div class="mt-8 grid md:grid-cols-2 gap-6">
            <article class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 p-6 hover:shadow-soft transition">
              <h3 class="text-lg font-bold">AGV Navigation & PLC Controls</h3>
              <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Developed and debugged PLC logic (Siemens/Mitsubishi/Allen‑Bradley) for AGV interfaces; tuned PID for magnetic‑tape guidance; participated in LiDAR navigation trials for AMR.</p>
              <ul class="mt-3 text-sm list-disc list-inside text-slate-600 dark:text-slate-300">
                <li>Improved tracking stability and reduced overshoot</li>
                <li>Deployed on lab floor with safety interlocks</li>
              </ul>
              <div class="mt-4 flex gap-3 text-xs">
                <span class="px-2 py-1 rounded border">PLC</span>
                <span class="px-2 py-1 rounded border">Controls</span>
                <span class="px-2 py-1 rounded border">LiDAR</span>
              </div>
            </article>
            
            <article class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 p-6 hover:shadow-soft transition">
              <h3 class="text-lg font-bold">Schmitt‑Trigger Signal Board</h3>
              <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Designed a custom PCB for signal conditioning; validated with oscilloscope; handled etching/cleanup and bring‑up; integrated with digital control stack.</p>
              <ul class="mt-3 text-sm list-disc list-inside text-slate-600 dark:text-slate-300">
                <li>Noise reduction for clean edge detection</li>
                <li>Documented BOM & test procedure</li>
              </ul>
              <div class="mt-4 flex gap-3 text-xs">
                <span class="px-2 py-1 rounded border">PCB</span>
                <span class="px-2 py-1 rounded border">Oscilloscope</span>
                <span class="px-2 py-1 rounded border">Digital</span>
              </div>
            </article>

            <article class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 p-6 hover:shadow-soft transition">
              <h3 class="text-lg font-bold">3‑DOF Manipulator + ROS/Gazebo</h3>
              <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Built a suction‑based pick‑and‑place arm; simulated in ROS/Gazebo and validated with a 300 g payload; integrated simple vision for object placement.</p>
              <ul class="mt-3 text-sm list-disc list-inside text-slate-600 dark:text-slate-300">
                <li>End‑to‑end design: CAD → sim → hardware</li>
                <li>Basic perception and planning</li>
              </ul>
              <div class="mt-4 flex gap-3 text-xs">
                <span class="px-2 py-1 rounded border">ROS</span>
                <span class="px-2 py-1 rounded border">Gazebo</span>
                <span class="px-2 py-1 rounded border">Pick&Place</span>
              </div>
            </article>

            <article class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 p-6 hover:shadow-soft transition">
              <h3 class="text-lg font-bold">ASRS – Quality Control</h3>
              <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Assisted with automated storage/retrieval system QA; image‑based defect checks and tolerance verification in OpenCV; documented workflow and metrics.</p>
              <ul class="mt-3 text-sm list-disc list-inside text-slate-600 dark:text-slate-300">
                <li>Improved detection consistency with lighting control</li>
                <li>Reusable pipeline for future cells</li>
              </ul>
              <div class="mt-4 flex gap-3 text-xs">
                <span class="px-2 py-1 rounded border">OpenCV</span>
                <span class="px-2 py-1 rounded border">QA</span>
                <span class="px-2 py-1 rounded border">ASRS</span>
              </div>
            </article>
          </div>
        </div>
      </section>

      <!-- Experience -->
      <section class="py-16">
        <div class="max-w-6xl mx-auto px-4">
          <h2 class="text-2xl md:text-3xl font-extrabold">Experience</h2>
          <div class="mt-6 grid gap-6">
            <article class="rounded-2xl border border-slate-200 dark:border-slate-700 p-6">
              <div class="flex items-center justify-between flex-wrap gap-2">
                <h3 class="font-bold">Microrobotics Lab, University of Delaware — Research Assistant</h3>
                <span class="text-xs text-slate-500">May 2024 – Jul 2024 · Newark, DE</span>
              </div>
              <ul class="mt-2 text-sm text-slate-600 dark:text-slate-300 list-disc list-inside">
                <li>Designed SolidWorks models for plate‑based microrobot monitoring and motion tracking.</li>
                <li>Implemented Python control to steer microrobots using a 3D Helmholtz magnetic coil system.</li>
                <li>Maintained stable environmental parameters inside the incubation chamber for repeatable results.</li>
              </ul>
            </article>

            <article class="rounded-2xl border border-slate-200 dark:border-slate-700 p-6">
              <div class="flex items-center justify-between flex-wrap gap-2">
                <h3 class="font-bold">Accenture — Data Engineering Associate</h3>
                <span class="text-xs text-slate-500">Dec 2022 – Jun 2023 · Chennai, India</span>
              </div>
              <ul class="mt-2 text-sm text-slate-600 dark:text-slate-300 list-disc list-inside">
                <li>Built batch & streaming pipelines (Kafka / Spark Streaming / APIs) and automated ETL.</li>
                <li>Developed Tableau dashboards for KPI visualization and reporting.</li>
                <li>Wrote and optimized SQL for large‑scale transformations and analytics.</li>
              </ul>
            </article>

            <article class="rounded-2xl border border-slate-200 dark:border-slate-700 p-6">
              <div class="flex items-center justify-between flex-wrap gap-2">
                <h3 class="font-bold">Difacto Robotics & Automation — Control Systems Intern</h3>
                <span class="text-xs text-slate-500">Jan 2022 – Jun 2022 · Bangalore, India</span>
              </div>
              <ul class="mt-2 text-sm text-slate-600 dark:text-slate-300 list-disc list-inside">
                <li>Programmed & debugged PLC logic (Siemens / Mitsubishi / Allen‑Bradley) for AGV systems.</li>
                <li>Performed PID tuning for magnetic‑tape guidance; collaborated on LiDAR‑based AMR navigation.</li>
                <li>Configured HMIs and commissioned control panels with on‑site testing.</li>
              </ul>
            </article>

            <article class="rounded-2xl border border-slate-200 dark:border-slate-700 p-6">
              <div class="flex items-center justify-between flex-wrap gap-2">
                <h3 class="font-bold">Assemtica Robotics — Robotics Intern</h3>
                <span class="text-xs text-slate-500">Mar 2019 – Jun 2019 · Vijayawada, India</span>
              </div>
              <ul class="mt-2 text-sm text-slate-600 dark:text-slate-300 list-disc list-inside">
                <li>Built real‑time computer‑vision pipelines for detection, tracking, and classification.</li>
                <li>Enhanced CV apps with automated testing and ML; contributed to Industry 4.0 workflows.</li>
              </ul>
            </article>
          </div>
        </div>
      </section>

      <!-- Education -->
      <section class="py-16 border-t border-slate-200 dark:border-slate-800">
        <div class="max-w-6xl mx-auto px-4">
          <h2 class="text-2xl md:text-3xl font-extrabold">Education</h2>
          <div class="mt-6 grid gap-6">
            <article class="rounded-2xl border border-slate-200 dark:border-slate-700 p-6">
              <div class="flex items-center justify-between flex-wrap gap-2">
                <h3 class="font-bold">M.S., Robotics — University of Delaware</h3>
                <span class="text-xs text-slate-500">May 2025 · GPA: 3.46/4.0</span>
              </div>
              <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Focus: Computer Vision, Mechatronics, Controls. Coursework: Perception, Planning, Embedded Systems.</p>
            </article>
            <article class="rounded-2xl border border-slate-200 dark:border-slate-700 p-6">
              <div class="flex items-center justify-between flex-wrap gap-2">
                <h3 class="font-bold">B.Tech, Automation & Robotics — KLE Technological University</h3>
                <span class="text-xs text-slate-500">Jun 2022 · GPA: 4.00/4.0</span>
              </div>
              <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Coursework: Kinematics of Machinery; Robot Analysis & Design; Programming Industrial Automation Systems; ML & ROS; Computer Vision & AI.</p>
            </article>
          </div>
        </div>
      </section>
    </section>

    <!-- Page 3: PHOTOS (with live upload to GitHub via token) -->
    <section data-route="/photos" class="hidden py-16">
      <div class="max-w-6xl mx-auto px-4">
        <h2 class="text-2xl md:text-3xl font-extrabold">Photography</h2>
        <p class="mt-2 text-slate-600 dark:text-slate-300 text-sm">This page can upload images directly to your GitHub repo using the GitHub API. <strong>Requires a fine‑grained personal access token</strong> with <em>Contents: Read &amp; Write</em> for this repo. Your token is stored locally in your browser (never sent anywhere except GitHub).</p>

        <!-- Uploader Controls -->
        <div class="mt-6 grid md:grid-cols-2 gap-6 p-4 rounded-2xl border border-slate-200 dark:border-slate-700">
          <div class="space-y-3">
            <label class="block text-sm font-semibold">GitHub Settings</label>
            <div class="grid grid-cols-2 gap-3 text-sm">
              <input id="ghUser" class="px-3 py-2 rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900" placeholder="Owner (e.g., Prathyush-9)" value="Prathyush-9"/>
              <input id="ghRepo" class="px-3 py-2 rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900" placeholder="Repo" value="prathyush-portfolio"/>
              <input id="ghBranch" class="px-3 py-2 rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900" placeholder="Branch" value="main"/>
              <input id="ghPath" class="px-3 py-2 rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900" placeholder="Folder" value="images"/>
              <input id="ghToken" type="password" class="col-span-2 px-3 py-2 rounded-xl border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900" placeholder="GitHub Token (write access)"/>
            </div>
            <div class="flex items-center gap-2 text-xs text-slate-500">
              <input id="rememberToken" type="checkbox" class="rounded"/> <label for="rememberToken">Remember token on this device</label>
            </div>

            <div class="space-y-2">
              <label class="text-sm font-semibold">Upload Images</label>
              <input id="fileInput" type="file" accept="image/*" multiple class="block w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:text-sm file:font-semibold file:bg-brand-600 file:text-white hover:file:bg-brand-700" />
              <button id="uploadBtn" class="px-4 py-2 rounded-xl bg-slate-900 text-white dark:bg-white dark:text-slate-900 font-semibold">Upload</button>
              <p id="uploadStatus" class="text-xs text-slate-500"></p>
            </div>
          </div>

          <div>
            <label class="block text-sm font-semibold mb-2">Gallery</label>
            <div id="photoGrid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3"></div>
          </div>
        </div>
      </div>

      <!-- Lightbox -->
      <dialog id="lightbox" class="p-0 rounded-2xl shadow-2xl backdrop:bg-black/60">
        <img id="lightboxImg" alt="Photo" class="max-h-[80vh] max-w-[90vw]">
      </dialog>
    </section>
  </main>

  <footer class="py-10 border-t border-slate-200 dark:border-slate-800">
    <div class="max-w-6xl mx-auto px-4 text-sm flex flex-col sm:flex-row items-center justify-between gap-2">
      <p>© <span id="year"></span> Prathyush. All rights reserved.</p>
      <div class="flex items-center gap-4">
        <a class="underline underline-offset-4" href="#/portfolio">Portfolio</a>
        <a class="underline underline-offset-4" href="#/photos">Photos</a>
        <a class="underline underline-offset-4" href="mailto:venkatasivasaip9@gmail.com">Email</a>
      </div>
    </div>
  </footer>

  <script>
    // ===== UTIL =====
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));

    // Year
    $('#year').textContent = new Date().getFullYear();

    // Dark toggle
    const root = document.documentElement;
    const themeToggle = $('#themeToggle');
    const sunIcon = $('#sunIcon');
    const moonIcon = $('#moonIcon');
    const pref = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    if (pref === 'dark') root.classList.add('dark');
    sunIcon.classList.toggle('hidden', pref !== 'light');
    moonIcon.classList.toggle('hidden', pref !== 'dark');
    themeToggle.addEventListener('click', () => {
      const isDark = root.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      sunIcon.classList.toggle('hidden', isDark);
      moonIcon.classList.toggle('hidden', !isDark);
    });

    // ===== TINY ROUTER =====
    const routes = $$("[data-route]");
    function renderRoute() {
      const hash = location.hash.replace('#','');
      const path = hash || '/';
      routes.forEach(sec => sec.classList.toggle('hidden', sec.getAttribute('data-route') !== path));
      // If photos page, refresh gallery
      if (path === '/photos') listImages();
    }
    window.addEventListener('hashchange', renderRoute);
    renderRoute();

    // ===== GITHUB PHOTOS (LIST & UPLOAD) =====
    const ghUser = $('#ghUser');
    const ghRepo = $('#ghRepo');
    const ghBranch = $('#ghBranch');
    const ghPath = $('#ghPath');
    const ghToken = $('#ghToken');
    const rememberToken = $('#rememberToken');
    const fileInput = $('#fileInput');
    const uploadBtn = $('#uploadBtn');
    const uploadStatus = $('#uploadStatus');
    const grid = $('#photoGrid');
    const lightbox = $('#lightbox');
    const lightboxImg = $('#lightboxImg');

    // Restore saved token
    const saved = localStorage.getItem('gh_token');
    if (saved) { ghToken.value = saved; rememberToken.checked = true; }

    function apiHeaders() {
      const headers = { 'Accept': 'application/vnd.github+json' };
      if (ghToken.value) headers['Authorization'] = 'Bearer ' + ghToken.value;
      return headers;
    }

    async function listImages() {
      try {
        grid.innerHTML = '<p class="text-sm text-slate-500">Loading images…</p>';
        const url = `https://api.github.com/repos/${ghUser.value}/${ghRepo.value}/contents/${ghPath.value}?ref=${ghBranch.value}`;
        const res = await fetch(url, { headers: apiHeaders() });
        if (!res.ok) { grid.innerHTML = '<p class="text-sm text-red-600">Unable to list images. Check repo/path/branch and token if private.</p>'; return; }
        const data = await res.json();
        const imgs = data.filter(x => x.type === 'file' && /\.(png|jpe?g|webp|gif)$/i.test(x.name));
        grid.innerHTML = '';
        imgs.forEach(x => addThumb(x.download_url, x.name));
      } catch (e) {
        grid.innerHTML = '<p class="text-sm text-red-600">Error loading images.</p>';
      }
    }

    function addThumb(src, name) {
      const fig = document.createElement('figure');
      fig.className = 'relative overflow-hidden rounded-lg border';
      const img = document.createElement('img');
      img.src = src; img.loading = 'lazy'; img.alt = name; img.className = 'w-full h-40 object-cover cursor-zoom-in';
      img.addEventListener('click', () => { lightboxImg.src = src; lightboxImg.alt = name; lightbox.showModal(); });
      const cap = document.createElement('figcaption');
      cap.className = 'p-1 text-[11px] text-center text-slate-500';
      cap.textContent = name;
      fig.append(img, cap);
      grid.append(fig);
    }

    async function uploadOne(file) {
      const arrayBuf = await file.arrayBuffer();
      const base64 = btoa(String.fromCharCode(...new Uint8Array(arrayBuf)));
      const url = `https://api.github.com/repos/${ghUser.value}/${ghRepo.value}/contents/${ghPath.value}/${encodeURIComponent(file.name)}`;
      const body = { message: `Add photo ${file.name}`, content: base64, branch: ghBranch.value };
      const res = await fetch(url, { method: 'PUT', headers: { ...apiHeaders(), 'Content-Type': 'application/json' }, body: JSON.stringify(body) });
      if (!res.ok) throw new Error('Upload failed');
      return await res.json();
    }

    uploadBtn?.addEventListener('click', async () => {
      try {
        uploadStatus.textContent = 'Uploading…';
        if (rememberToken.checked && ghToken.value) localStorage.setItem('gh_token', ghToken.value);
        if (!fileInput.files?.length) { uploadStatus.textContent = 'Choose at least one image.'; return; }
        for (const f of fileInput.files) { await uploadOne(f); }
        uploadStatus.textContent = 'Done! Refreshing gallery…';
        await listImages();
        fileInput.value = '';
        setTimeout(()=> uploadStatus.textContent = '', 2000);
      } catch (e) {
        uploadStatus.textContent = 'Upload failed. Check token permissions and branch protection.';
      }
    });

    // Lightbox close
    lightbox?.addEventListener('click', () => lightbox.close());
  </script>
</body>
</html>
